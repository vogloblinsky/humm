
<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Humm</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    </head>
    <body>
        <!--[if lte IE 9]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
        <![endif]-->

        <p>Hmm</p>

        <script>
            let finalCategories = [];

            let THRESHOLD = 500;

            let nameSort = (a, b) => {
                const genreA = a.name.toUpperCase();
                const genreB = b.name.toUpperCase();

                let comparison = 0;
                if (genreA > genreB) {
                    comparison = 1;
                } else if (genreA < genreB) {
                    comparison = -1;
                }
                return comparison;
            }

            fetch('https://fr.openfoodfacts.org/categories.json')
                .then((resp) => resp.json())
                .then(function(data) {
                    let categories = data.tags;
                    categories.forEach(categorie => {
                        if (categorie.products > THRESHOLD && categorie.name.indexOf(':') === -1) {
                            finalCategories.push(categorie);
                        }
                    });
                    finalCategories = finalCategories.sort(nameSort);
                    finalCategories.forEach(categorie => {
                        console.log(categorie.name, categorie.products, categorie.url);
                    });
                });
        </script>
    </body>
</html>
